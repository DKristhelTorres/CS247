<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Play&Boom - Game Board</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <style>
        body {
            background: #000;
            color: #fff;
            margin: 0;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .cinematic {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
            z-index: 10;
        }
        .cinematic-text {
            font-size: 2.2rem;
            text-align: center;
            max-width: 700px;
            opacity: 0;
            transition: opacity 0.8s;
            letter-spacing: 1px;
            line-height: 1.4;
            color: #fff;
        }
        .cinematic-text.active {
            opacity: 1;
        }
        .game-board {
            display: none;
            width: 100vw;
            height: 100vh;
            position: relative;
        }
        .game-board.active {
            display: block;
        }
        .player-list-vertical {
            position: absolute;
            top: 0;
            left: 0;
            width: 220px;
            height: 100vh;
            background: rgba(30,30,30,0.95);
            display: flex;
            flex-direction: column;
            align-items: stretch;
            padding: 32px 0 32px 0;
            z-index: 2;
        }
        .player-card-vertical {
            background: #34495e;
            margin: 12px 16px;
            padding: 18px 10px;
            border-radius: 8px;
            color: #fff;
            text-align: left;
            min-width: 160px;
            display: flex;
            align-items: center;
            gap: 16px;
        }
        .player-card-vertical.host {
            border: 2px solid #e74c3c;
        }
        .player-card-vertical .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #222;
        }
        .grid-area {
            position: absolute;
            left: 240px;
            top: 0;
            width: 520px;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: center;
        }
        .game-status {
            margin-bottom: 24px;
            color: #fff;
            font-size: 1.3rem;
        }
        .game-area {
            background: #223;
            border-radius: 12px;
            min-width: 400px;
            min-height: 320px;
            color: #fff;
            padding: 32px;
            font-size: 1.5rem;
        }
    </style>
</head>
<body>
    <div class="cinematic">
        <div id="cinematic-text" class="cinematic-text"></div>
    </div>
    <div class="game-board">
        <div class="player-list-vertical" id="player-list-vertical"></div>
        <div class="grid-area" id="grid-area">
            <div class="game-status" id="game-status"></div>
            <div class="game-area" id="game-area"></div>
        </div>
    </div>
    <script>
        // Cinematic narrative lines
        const narrative = [
            "You are a chaotic and rather unbothered government spy. You are what they call...",
            "A PIGEON",
            "In your journey of making abstract nests, you had enough of fighting for crumbs in these New York streets.",
            "Your job? Trigger in your fellow 'pigeon' mates a segfault in their surveillance system to get rid of the competition."
        ];
        const cinematicDiv = document.querySelector('.cinematic');
        const cinematicText = document.getElementById('cinematic-text');
        const gameBoard = document.querySelector('.game-board');
        const playerListVertical = document.getElementById('player-list-vertical');
        const gameStatus = document.getElementById('game-status');
        const gameArea = document.getElementById('game-area');

        // Show cinematic sequence
        let idx = 0;
        function showCinematicLine(i) {
            cinematicText.classList.remove('active');
            setTimeout(() => {
                cinematicText.textContent = narrative[i];
                cinematicText.classList.add('active');
            }, 400);
        }
        function nextCinematic() {
            if (idx < narrative.length) {
                showCinematicLine(idx);
                idx++;
                setTimeout(() => {
                    cinematicText.classList.remove('active');
                    setTimeout(nextCinematic, 1300); // fade out before next
                }, 4500); // show each line for 4.5s
            } else {
                // Hide cinematic and show game board
                cinematicDiv.style.display = 'none';
                gameBoard.classList.add('active');
                // Render vertical player cards and grid area
                renderPlayerCardsVertical();
                gameStatus.textContent = 'Game Started!';
                gameArea.innerHTML = '<h2>Grid Game Placeholder</h2><p>The grid game will appear here.</p>';
            }
        }

        // Render player cards vertically on the left
        function renderPlayerCardsVertical() {
            playerListVertical.innerHTML = '';
            const gamePlayers = JSON.parse(localStorage.getItem('gamePlayers') || '[]');
            gamePlayers.forEach(player => {
                const isHost = player.includes('(Host)');
                const playerCard = document.createElement('div');
                playerCard.className = `player-card-vertical${isHost ? ' host' : ''}`;
                playerCard.innerHTML = `
                    <img src="avatar1.png" alt="Avatar" class="avatar">
                    <div>
                        <div class="player-name">${player}</div>
                        <div class="player-status">${isHost ? 'Host' : 'Player'}</div>
                    </div>
                `;
                playerListVertical.appendChild(playerCard);
            });
        }

        // Start cinematic on load
        nextCinematic();
    </script>
</body>
</html> 